function chooseBG(a,b){a&&"block"===$("#nav-xs").css("display")&&!1===xsSet&&($("#mobile-bg").attr("src",a),xsSet=!0),!b||"block"!==$("#nav-lg").css("display")&&"block"!==$("#nav-sm").css("display")||!1!==lgSet||($("body").css("background-image",'url("'+b+'")'),lgSet=!0)}var addThis=function(a){function b(b,c){a(b).click(function(b){b.preventDefault();var d=a(location).attr("href"),e=a(window).width()/2-350,f=a(window).height()/2-162.5;try{window.open("//api.addthis.com/oexchange/0.8/forward/"+c+"/offer?pubid=ra-547e0fb955b81113&url="+d,c+" popup","scrollbars=no, height=325, width=700, top="+f+", left="+e)}catch(a){window.open("//api.addthis.com/oexchange/0.8/forward/"+c+"/offer?pubid=ra-547e0fb955b81113&url="+d,c+"popup")}return!1})}function c(b){a(b).click(function(a){a.preventDefault();var b=encodeURI(window.location);return window.open(b+"?print=1","_self"),!1})}function d(){b("a#facebook-share-button","facebook"),b("a#twitter-share-button","twitter"),b("a#email-share-button","email"),c("a#print-share-button")}return{init:d}}(jQuery);!function(a){addThis.init()}(jQuery);var xsSet=!1,lgSet=!1;$(function(){$("[data-kccomponent]").each(function(){var a=$(this),b=a.data("kccomponent")+".aspx?a=true";a.html(""),$.ajax({type:"GET",url:b}).done(function(b){a.append(b),$(".popoveritem").popover()})})}),$(window).resize(function(){"none"===$("#nav-xs").css("display")?$("#footer-nav .col-sm-4 ul").collapse("show"):$("#footer-nav .col-sm-4 ul").collapse("hide")}).resize(),function(a){"use strict";"none"===a("#nav-xs").css("display")?a("#footer-nav .col-sm-4 ul").collapse("show"):a("#footer-nav .col-sm-4 ul").collapse("hide"),a("#footer-nav .col-sm-4 h4").each(function(b){a(this).click(function(b){b.preventDefault(),"block"===a("#nav-xs").css("display")&&(Modernizr.mq("only all")?a(this).next().collapse("toggle"):a(this).next().toggleClass("collapse"),a(this).find("span").toggleClass("fa-minus").toggleClass("fa-plus"))})})}(jQuery),function(a){"use strict";function b(){window.location.href=e}if("undefined"!=typeof jQuery){var c=/\.(ashx.*|jpg|jpeg|png|gif|svg|ai|ps|json|zip|exe|dmg|pdf|doc.*|xls.*|ppt.*|mp3|txt|rar|wma|mov|avi|wmv|mpg|mpeg|flv|wav|mp4|csv|swf|xml)$/i,d="";void 0!==a("base").attr("href")&&(d=a("base").attr("href"));var e="";a("#main-content").on("click","a",function(){var f=a(this),g=!0,h=void 0!==f.attr("href")?f.attr("href"):"",i=h.match(document.domain.split(".").reverse()[1]+"."+document.domain.split(".").reverse()[0]);if(!h.match(/^javascript:/i)){var j=[];if(j.value=0,j.nonI=!1,h.match(/^mailto\:/i)?(j.category="email",j.action="click",j.label=h.replace(/^mailto\:/i,""),j.loc=h):h.match(c)?(j.category="download",j.action="click",j.label=h.replace(/ /g,"-"),j.loc=d+h):h.match(/^https?\:/i)&&!i?(j.category="external",j.action="click",j.label=h.replace(/^https?\:\/\//i,""),j.nonI=!0,j.loc=h):h.match(/^tel\:/i)?(j.category="telephone",j.action="click",j.label=h.replace(/^tel\:/i,""),j.loc=h):g=!1,g){var k=!0;return"external"!==j.category&&"download"!==j.category||void 0!==f.attr("target")&&"_blank"===f.attr("target").toLowerCase()?ga("send","event",j.category.toLowerCase(),j.action.toLowerCase(),j.label.toLowerCase(),j.value,{nonInteraction:j.nonI}):(e=j.loc,ga("send","event",j.category.toLowerCase(),j.action.toLowerCase(),j.label.toLowerCase(),j.value,{nonInteraction:j.nonI,hitCallback:b}),k=!1),k}}})}}(jQuery);var kcGAEvents=function(a){function b(b){a(b).each(function(){var c,d,e,f,g;f=b.indexOf("#navbar-full")>=0?"Large Header Navigation":b.indexOf("#nav-sm")>=0?"Small Header Navigation":b.indexOf("#nav-xs")>=0?"XSmall Header Navigation":"Footer Navigation",e="Footer Navigation"===f?a(this).parents(".list-unstyled").siblings("h4"):a(this).parents(".dropdown-menu").siblings("a.nav-header"),a(this).click(function(b){d=e.text(),""===d&&"Small Header Navigation"===f&&(d="Search"),c='<i class="fa fa-ellipsis-h"></i>'===a(this).html()?"See more ellipsis":a(this).text(),g="XSmall Header Navigation"===f?c:d+": "+c,ga("send","event",f,"click",g)})})}function c(){b("#navbar-full .list-unstyled a"),b("#nav-sm .list-unstyled a"),b("#nav-xs .nav.navbar-nav li a"),b("#footer-nav .list-unstyled a")}return{init:c}}(jQuery);$(function(){kcGAEvents.init()}),function(a){"use strict";a.fn.eventsCalendar=function(b){function c(a){var b=[];return b[0]="JAN",b[1]="FEB",b[2]="MAR",b[3]="APR",b[4]="MAY",b[5]="JUN",b[6]="JUL",b[7]="AUG",b[8]="SEP",b[9]="OCT",b[10]="NOV",b[11]="DEC",b[a]}var d=a.extend({url:"",calNum:"69gk-ky9a",numItems:4,title:"Events",titleIcon:"fa-calendar",allItemsUrl:"//www.kingcounty.gov/about/news/events",allItemsText:"See all events",version:1},b);2===d.version&&"69gk-ky9a"===d.callNum?d.calNum="wv5q-a3ty":d.calNum=d.calNum;var e=this,f=[];return this.each(function(){function b(b){var g=0;e.addClass("calendar-events-list");var h='<h2><span class="fa-stack"><i class="fa fa-square fa-stack-2x"></i><i class="fa '+d.titleIcon+' fa-stack-1x fa-inverse"></i> </span> '+d.title+"</h2>";a.each(b,function(b,e){var i=new Date(e.end_time);if(2!==d.version&&(i=new Date(0),i.setUTCSeconds(e.end_time),i.dst()&&i.getHours()<=1&&i.setHours(i.getHours()+1)),i>=new Date&&g<d.numItems){h+='<div class="media"><div class="media-left">';var j=i.getDate();h+='<div class="date-day">'+j+"</div> ",h+='<div class="date-month">'+c(i.getMonth())+"</div>",h+="</div>";var k,l,m,n;try{2!==d.version?(n=a.parseJSON(e.location.human_address),k=n.city,l=n.address):(k=e.location_city||"Not available",l=e.location_address||"Not available")}catch(a){k="Not available",l="Not available"}m=void 0!==e.location_name?e.location_name:"Not available";var o,p="Location: "+m+"<br /> Address: "+l+"<br /> City: "+k;try{o=e.url.url,2===d.version&&(o=e.url),o=o.replace(/(^\w+:|^)/,"")}catch(a){o="/about/news/events"}h+='<div class="media-body">';var q;q=0===e.event_name.search("<")?a(e.event_name).text():e.event_name,h+='<p><a class="pop" id="popover'+b+'"rel="popover" data-animation="true" data-html="true" data-placement="top" data-trigger="hover" data-delay="0"',h+='data-content="'+p+'"',h+='title="'+e.event_name+'"',h+='href="'+o+'"',h+=">"+q+"</a></p>",h+="</div></div>",f.push("#popover"+b),g+=1}}),0===g&&(h+='<div class="media"><div class="media-left">',h+='<div class="date-day"><i class="fa fa-info-circle"></i></div> ',h+='<div class="date-month"></div></div>',h+='<div class="media-body">',h+="<p>There are no upcoming events in this calendar.</p>",h+="</div></div>"),h+='<p class="all-events"><a href="'+d.allItemsUrl+'"><em>'+d.allItemsText+"</em></a></p>",e.html(h),a(f).each(function(b){a(f).popover()})}function g(b,c){if("XDomainRequest"in window&&null!==window.XDomainRequest){var f=new XDomainRequest;f.onload=function(){var b=a.parseJSON(f.responseText);null!==b&&void 0!==b||(b=a.parseJSON(data.firstChild.textContent)),c(b)},f.onprogress=function(){},f.ontimeout=function(){},f.onerror=function(){_result=!1},f.timeout=5e3,f.contenttype="text/plain",f.open("get",b),f.send()}else a.ajax({url:b,cache:!1,dataType:"json",type:"GET",async:!1,success:function(a,b){c(a)},error:function(){e.addClass("calendar-events-list");var a="";a+='<h2><span class="fa-stack"><i class="fa fa-square fa-stack-2x"></i><i class="fa '+d.titleIcon+' fa-stack-1x fa-inverse"></i> </span> Events</h2>',a='<iframe width="100%" height="425px" src="//data.kingcounty.gov/w/'+d.calNum+'"frameborder="0" scrolling="no"></iframe>',a+='<p class="all-events"><a href="'+d.allItemsUrl+'"><em>'+d.allItemsUrl+"</em></a></p>",e.html(a)}})}e.append('<span class="fa fa-spinner fa-spin fa-4x"></span>');var h="//data.kingcounty.gov/resource/"+d.calNum+".json?";d.url&&(h=d.url);var i=new Date,j=""+(i.getMonth()+1),k=""+i.getDate(),l=i.getFullYear();j.length<2&&(j="0"+j),k.length<2&&(k="0"+k),i="'"+[l,j,k].join("-")+"'",h+="&$order=start_time&$where=start_time>="+i+"&$$app_token=bCoT94x6NcBsw8AGGZudTwOs7",a.ajax({url:h,dataType:"json",jsonp:!1}).success(function(a){b(a)}).error(function(){g(h,b)}),Date.prototype.stdTimezoneOffset=function(){var a=new Date(this.getFullYear(),0,1),b=new Date(this.getFullYear(),6,1);return Math.max(a.getTimezoneOffset(),b.getTimezoneOffset())},Date.prototype.dst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()}})}}(jQuery),function(a){"use strict";a.fn.deliciousNewsFeed=function(b){function c(b){f.addClass("news-feed"),f.addClass("dated-news-feed");var c='<h2><span class="fa-stack"><i class="fa fa-square fa-stack-2x"></i><i class="fa '+e.titleIcon+' fa-stack-1x fa-inverse"></i> </span> '+e.title+"</h2>";a.each(b,function(a,b){if(void 0!==b.d.split(": ")[1]){var d=b.d.split(": "),f=d[0],h=f.split(" ")[0].toUpperCase();h=h.substring(0,3);var i=f.split(" ")[1];c+='<div class="media"><div class="media-left">',c+='<div class="date-day">'+i+"</div>",c+='<div class="date-month">'+h+"</div>",c+="</div>";var j="Summary: "+b.n,k=b.d,l=k.split(": "),m=l[1];c+='<div class="media-body">',c+='<a href="'+b.u+'" id="popover'+a+'" rel="popover" data-animation="true" data-html="true" data-placement="right" data-trigger="hover" data-delay="0" data-content="'+j+'" title="'+b.d+'">'+m+"</a>",e.showSummary&&(c+="<p>"+b.n+"</p>"),c+="</div></div>",g.push("#popover"+a)}}),c+='<p><a href="'+e.allItemsUrl+'"><em>'+e.allItemsText+"</em></a></p>",f.html(c),a(g).each(function(){a(g).popover()})}function d(){f.addClass("news-feed"),f.addClass("dated-news-feed");var a='<h2><span class="fa fa-exclamation-triangle fa-color-danger"></i> </span> Oops...</h2>';a+='<div class="media-body">',a+="<p>Sorry, this list is temporarily unavailable.</p>",a+='<p>Please go <a href="https://delicious.com/kingcounty">here</a> to see all King County news.</a>',a+="</div>",f.html(a)}var e=a.extend({feedURL:"//feeds.delicious.com/v2/json/kingcounty",numItems:3,title:"News",titleIcon:"fa-file-text-o",showSummary:!0,allItemsUrl:"//www.kingcounty.gov/about/news/events",allItemsText:"See all King County news"},b),f=this,g=[];return this.each(function(){f.append('<i class="fa fa-spinner fa-spin fa-4x"></i>');var b=e.feedURL+"?count="+e.numItems;a.ajax({url:b,dataType:"jsonp",timeout:5e3}).success(function(a){c(a)}).error(function(){d()})})}}(jQuery),$(function(){"use strict";function a(){return"ontouchstart"in window||"onmsgesturechange"in window}a()?$(".navbar  a.dropdown-toggle").click(function(a){a.preventDefault(),$(".dropdown-toggle").removeClass("disabled")}):($("header .navbar .dropdown-toggle").hover(function(){$("#main-content").stop(!0).fadeTo(300,.3),$("#home-content").stop(!0).fadeTo(300,.3)},function(){$("#main-content").stop(!0).fadeTo(300,1),$("#home-content").stop(!0).fadeTo(300,1)}),$("header .dropdown-menu").hover(function(){$("#main-content").stop(!0).fadeTo(300,.3),$("#home-content").stop(!0).fadeTo(300,.3)},function(){$("#main-content").stop(!0).fadeTo(300,1),$("#home-content").stop(!0).fadeTo(300,1)})),$("#main-content").click(function(){$(".dropdown-toggle").removeClass("show")})});var dropdownMenuDelay=function(a){function b(a,b){var c=b.children(e),d=c.data("timer")||0;clearTimeout(d),d=setTimeout(function(){"enter"===a?c.addClass("show"):c.removeClass("show")},250),c.data("timer",d)}function c(){a(d).hover(function(){b("enter",a(this))},function(){b("leave",a(this))})}var d="ul.nav li.dropdown",e="ul.dropdown-menu";return{init:c}}(jQuery);$(function(){dropdownMenuDelay.init()});var fakewaffle=function(a,b){"use strict";return b.responsiveTabs=function(c){b.currentPosition="tabs";var d=a(".nav-tabs.responsive, .nav-pills.responsive"),e="",f="",g="";void 0===c&&(c=["xs","sm"]),a.each(c,function(){e+=" hidden-"+this,f+=" visible-"+this}),a.each(d,function(){var b=a(this),c=b.find("li a"),d=a("<div></div>",{class:"panel-group responsive"+f,id:"collapse-"+b.attr("id")});a.each(c,function(){var c=a(this),e=void 0===c.attr("class")?"":c.attr("class"),f="accordion-toggle collapsed",h=void 0===c.parent().attr("class")?"":c.parent().attr("class"),i="panel panel-accordion-primary",j=c.get(0).hash.replace("#","collapse-");e.length>0&&(f+=" "+e),h.length>0&&(h=h.replace(/\bactive\b/g,""),i+=" "+h,i=i.replace(/\s{2,}/g," "),i=i.replace(/^\s+|\s+$/g,"")),c.parent().hasClass("active")&&(g="#"+j),d.append(a("<div>").attr("class",i).html(a("<div>").attr("class","panel-heading").html(a("<h4>").attr("class","panel-title").html(a("<a>",{class:f,"data-toggle":"collapse","data-parent":"#collapse-"+b.attr("id"),href:"#"+j,html:c.html()})))).append(a("<div>",{id:j,class:"panel-collapse collapse"})))}),b.next().after(d),b.addClass(e),a(".tab-content.responsive").addClass(e),g&&a(g).collapse("show")}),b.checkResize(),b.bindTabToCollapse()},b.checkResize=function(){!0===a(".panel-group.responsive").is(":visible")&&"tabs"===b.currentPosition?(b.tabToPanel(),b.currentPosition="panel"):!1===a(".panel-group.responsive").is(":visible")&&"panel"===b.currentPosition&&(b.panelToTab(),b.currentPosition="tabs")},b.tabToPanel=function(){var b=a(".nav-tabs.responsive, .nav-pills.responsive");a.each(b,function(b,c){var d=a(c).next(".tab-content").find(".tab-pane");a.each(d,function(b,c){var d=a(c).attr("id").replace(/^/,"#collapse-");a(c).removeClass("tab-pane").addClass("panel-body fw-previous-tab-pane").appendTo(a(d))})})},b.panelToTab=function(){var b=a(".panel-group.responsive");a.each(b,function(b,c){var d=a(c).attr("id").replace("collapse-","#"),e=a(d).next(".tab-content")[0];a(c).find(".panel-body.fw-previous-tab-pane").removeClass("panel-body.fw-previous-tab-pane").addClass("tab-pane").appendTo(a(e))})},b.bindTabToCollapse=function(){var b=a(".nav-tabs.responsive, .nav-pills.responsive").find("li a"),c=a(".panel-group.responsive").find(".panel-collapse");b.on("shown.bs.tab",function(b){(a(b.currentTarget.hash.replace(/#/,"#collapse-")).collapse("show"),b.relatedTarget)&&a(b.relatedTarget.hash.replace(/#/,"#collapse-")).collapse("hide")}),c.on("shown.bs.collapse",function(b){var c=a(b.target).context.id.replace(/collapse-/g,"#");a('a[href="'+c+'"]').tab("show");var d=a(b.currentTarget).closest(".panel-group.responsive");a(d).find(".panel-body").removeClass("active"),a(b.currentTarget).find(".panel-body").addClass("active")})},a(window).resize(function(){b.checkResize()}),b}(window.jQuery,fakewaffle||{});!function(a){fakewaffle.responsiveTabs(["xs"])}(jQuery),$(function(){if($("[data-toggle=offcanvas]").click(function(){$(".row-offcanvas").toggleClass("active")}),$(".hidden-link").hide(),$("a.toggle-hidden-links").click(function(){$(this).hasClass("open")?($(".hidden-link").hide("fast"),$(this).removeClass("open")):($(".hidden-link").hide("fast"),$("a.toggle-hidden-links").removeClass("open"),$(this).closest("ul").children(".hidden-link").show("fast"),$(this).addClass("open"))}),$('a[href="#"]').click(function(a){a.preventDefault()}),$(document).on("click",".yamm .dropdown-menu",function(a){a.stopPropagation()}),0!==$("#sticky-footer").length&&$("#sticky-footer").scrollToFixed({bottom:0,limit:$("#footer-nav-limit").offset().top,fixed:function(){$(this).css("display","block"),$(this).css("width","100%")},unfixed:function(){$(this).css("display","none")},dontSetWidth:!1}),function(a,b,c){if(c in b&&b[c]){var d,e=a.location,f=/^(a|html)$/i;a.addEventListener("click",function(a){for(d=a.target;!f.test(d.nodeName);)d=d.parentNode;"href"in d&&(d.href.indexOf("http")||~d.href.indexOf(e.host))&&(a.preventDefault(),e.href=d.href)},!1)}}(document,window.navigator,"standalone"),navigator.userAgent.match(/IEMobile\/10\.0/)){var a=document.createElement("style");a.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.querySelector("head").appendChild(a)}}),$(function(){$("#sidebar .panel .list-group.collapsed").find("a.list-group-item").each(function(){$(this).css("padding-left","+=10")}),$("#sidebar .panel .list-group.collapsed > .list-group.collapsed").find("a.list-group-item").each(function(){$(this).css("padding-left","+=10")}),$("#sidebar .panel .list-group.collapsed >.list-group.collapsed > .list-group.collapsed").find("a.list-group-item").each(function(){$(this).css("padding-left","+=10")}),$("#sidebar .panel .list-group.collapsed > .list-group.collapsed > .list-group.collapsed > .list-group.collapsed").find("a.list-group-item").each(function(){$(this).css("padding-left","+=10")}),$("#sidebar .panel .list-group.collapse").find("a.list-group-item").each(function(){$(this).css("padding-left","+=10")}),$("#sidebar .panel .list-group.collapse > .list-group.collapse").find("a.list-group-item").each(function(){$(this).css("padding-left","+=10")}),$("#sidebar .panel a.list-group-item[data-toggle]").each(function(){$(this).addClass("collapsed")});var a=$(".sidebar-offcanvas .list-group-item.active");$(a).each(function(a){$(this).css("padding-left","-=6")})}),function(a){"use strict";a("a.skip-contents").click(function(){var b="#"+this.href.split("#")[1];return a(b).attr("tabindex",-1).on("blur focusout",function(){a(this).removeAttr("tabindex")}).focus(),!1})}(jQuery);var verticalPanels=function(a){"use strict";function b(b){b=b.replace("link",""),a("html,body").animate({scrollTop:a("#"+b).offset().top},"slow")}function c(){a(".addon-row.row .vertical-story-panel").closest(".addon-row").not(".addon-row-attached").css("padding-top","0").css("padding-bottom","0");for(var c=a(".row.vertical-story-panel"),d=0;d<c.length;d++)a(c[d]).closest(".addon-row-attached").css("padding-bottom","0"),a(c[d]).attr("id","story-panel-"+d),a(c[d]).addClass("vertical-story-panel-border"),"scroll"===a(c[d]).attr("data-vertical-story-panel")&&a(c[d]).append('<a class="vertical-story-panel-arrow" href="story-panel-'+d+'"><span class="fa-stack fa-2x"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-chevron-down fa-stack-1x fa-inverse"></i></span></a>');a(".row.vertical-story-panel > a.vertical-story-panel-arrow").click(function(c){c.preventDefault(),b(a(this).attr("href"))})}return{init:c}}(jQuery);!function(){"use strict";verticalPanels.init()}(),function(a){a.isScrollToFixed=function(b){return!!a(b).data("ScrollToFixed")},a.ScrollToFixed=function(b,c){function d(){w.trigger("preUnfixed.ScrollToFixed"),k(),w.trigger("unfixed.ScrollToFixed"),A=-1,x=w.offset().top,y=w.offset().left,q.options.offsets&&(y+=w.offset().left-w.position().left),-1==z&&(z=y),r=w.css("position"),v=!0,-1!=q.options.bottom&&(w.trigger("preFixed.ScrollToFixed"),i(),w.trigger("fixed.ScrollToFixed"))}function e(){var a=q.options.limit;return a?"function"==typeof a?a.apply(w):a:0}function f(){return"fixed"===r}function g(){return"absolute"===r}function h(){return!(f()||g())}function i(){f()||(B.css({display:w.css("display"),width:w.outerWidth(!0),height:w.outerHeight(!0),float:w.css("float")}),cssOptions={"z-index":q.options.zIndex,position:"fixed",top:-1==q.options.bottom?m():"",bottom:-1==q.options.bottom?"":q.options.bottom,"margin-left":"0px"},q.options.dontSetWidth||(cssOptions.width=w.width()),w.css(cssOptions),w.addClass(q.options.baseClassName),q.options.className&&w.addClass(q.options.className),r="fixed")}function j(){var a=e(),b=y;q.options.removeOffsets&&(b="",a-=x),cssOptions={position:"absolute",top:a,left:b,"margin-left":"0px",bottom:""},q.options.dontSetWidth||(cssOptions.width=w.width()),w.css(cssOptions),r="absolute"}function k(){h()||(A=-1,B.css("display","none"),w.css({"z-index":u,width:"",position:s,left:"",top:t,"margin-left":""}),w.removeClass("scroll-to-fixed-fixed"),q.options.className&&w.removeClass(q.options.className),r=null)}function l(a){a!=A&&(w.css("left",y-a),A=a)}function m(){var a=q.options.marginTop;return a?"function"==typeof a?a.apply(w):a:0}function n(){if(a.isScrollToFixed(w)){var b=v;v?h()&&(x=w.offset().top,y=w.offset().left):d();var c=a(window).scrollLeft(),n=a(window).scrollTop(),r=e();q.options.minWidth&&a(window).width()<q.options.minWidth?h()&&b||(p(),w.trigger("preUnfixed.ScrollToFixed"),k(),w.trigger("unfixed.ScrollToFixed")):q.options.maxWidth&&a(window).width()>q.options.maxWidth?h()&&b||(p(),w.trigger("preUnfixed.ScrollToFixed"),k(),w.trigger("unfixed.ScrollToFixed")):-1==q.options.bottom?r>0&&n>=r-m()?g()&&b||(p(),w.trigger("preAbsolute.ScrollToFixed"),j(),w.trigger("unfixed.ScrollToFixed")):n>=x-m()?(f()&&b||(p(),w.trigger("preFixed.ScrollToFixed"),i(),A=-1,w.trigger("fixed.ScrollToFixed")),l(c)):h()&&b||(p(),w.trigger("preUnfixed.ScrollToFixed"),k(),w.trigger("unfixed.ScrollToFixed")):r>0?n+a(window).height()-w.outerHeight(!0)>=r-(m()||-o())?f()&&(p(),w.trigger("preUnfixed.ScrollToFixed"),"absolute"===s?j():k(),w.trigger("unfixed.ScrollToFixed")):(f()||(p(),w.trigger("preFixed.ScrollToFixed"),i()),l(c),w.trigger("fixed.ScrollToFixed")):l(c)}}function o(){return q.options.bottom?q.options.bottom:0}function p(){var a=w.css("position");"absolute"==a?w.trigger("postAbsolute.ScrollToFixed"):"fixed"==a?w.trigger("postFixed.ScrollToFixed"):w.trigger("postUnfixed.ScrollToFixed")}var q=this;q.$el=a(b),q.el=b,q.$el.data("ScrollToFixed",q);var r,s,t,u,v=!1,w=q.$el,x=0,y=0,z=-1,A=-1,B=null,C=function(a){w.is(":visible")&&(v=!1,n())},D=function(a){window.requestAnimationFrame?requestAnimationFrame(n):n()},E=function(a){a=a||window.event,a.preventDefault&&a.preventDefault(),a.returnValue=!1};q.init=function(){q.options=a.extend({},a.ScrollToFixed.defaultOptions,c),u=w.css("z-index"),q.$el.css("z-index",q.options.zIndex),B=a("<div />"),r=w.css("position"),s=w.css("position"),t=w.css("top"),h()&&q.$el.after(B),a(window).bind("resize.ScrollToFixed",C),a(window).bind("scroll.ScrollToFixed",D),"ontouchmove"in window&&a(window).bind("touchmove.ScrollToFixed",n),q.options.preFixed&&w.bind("preFixed.ScrollToFixed",q.options.preFixed),q.options.postFixed&&w.bind("postFixed.ScrollToFixed",q.options.postFixed),q.options.preUnfixed&&w.bind("preUnfixed.ScrollToFixed",q.options.preUnfixed),q.options.postUnfixed&&w.bind("postUnfixed.ScrollToFixed",q.options.postUnfixed),q.options.preAbsolute&&w.bind("preAbsolute.ScrollToFixed",q.options.preAbsolute),q.options.postAbsolute&&w.bind("postAbsolute.ScrollToFixed",q.options.postAbsolute),q.options.fixed&&w.bind("fixed.ScrollToFixed",q.options.fixed),q.options.unfixed&&w.bind("unfixed.ScrollToFixed",q.options.unfixed),q.options.spacerClass&&B.addClass(q.options.spacerClass),w.bind("resize.ScrollToFixed",function(){B.height(w.height())}),w.bind("scroll.ScrollToFixed",function(){w.trigger("preUnfixed.ScrollToFixed"),k(),w.trigger("unfixed.ScrollToFixed"),n()}),w.bind("detach.ScrollToFixed",function(b){E(b),w.trigger("preUnfixed.ScrollToFixed"),k(),w.trigger("unfixed.ScrollToFixed"),a(window).unbind("resize.ScrollToFixed",C),a(window).unbind("scroll.ScrollToFixed",D),w.unbind(".ScrollToFixed"),B.remove(),q.$el.removeData("ScrollToFixed")}),C()},q.init()},a.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3,baseClassName:"scroll-to-fixed-fixed"},a.fn.scrollToFixed=function(b){return this.each(function(){new a.ScrollToFixed(this,b)})}}(jQuery);